<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WAR ROOM - ABILITY_SJ</title>
  <link rel="stylesheet" href="css/style.css" />
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  
  <style>
    /* ForÃ§a layout em linhas especÃ­ficas */
    .row-container {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
        width: 100%;
        flex-wrap: wrap;
    }
    
    .col-half {
        flex: 1;
        min-width: 300px; /* Quebra em telas pequenas */
    }
    
    .col-quarter {
        flex: 1;
        min-width: 200px; /* Quebra em telas muito pequenas */
    }

    /* Ajuste fino para os cards dentro das colunas */
    .row-container .card {
        margin-bottom: 0; /* Remove margem inferior pois o container gerencia o gap */
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .chart-container-small {
        position: relative;
        height: 180px; /* Altura fixa para os grÃ¡ficos de linha quÃ¡drupla */
        width: 100%;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-top">
      <h1>WAR ROOM <span class="brand-tag">ABILITY_SJ</span></h1>
      <small id="lastUpdate" style="font-weight:bold; color:#eab308">Conectando API...</small>
    </div>
    
    <div class="filter-bar">
      <div class="filter-group-labeled">
        <label>HISTÃ“RICO:</label>
        <select id="yearSelect" class="styled-select"></select>
        <select id="monthSelect" class="styled-select">
          <option value="0">Selecione MÃªs</option>
          <option value="1">Janeiro</option>
          <option value="2">Fevereiro</option>
          <option value="3">MarÃ§o</option>
          <option value="4">Abril</option>
          <option value="5">Maio</option>
          <option value="6">Junho</option>
          <option value="7">Julho</option>
          <option value="8">Agosto</option>
          <option value="9">Setembro</option>
          <option value="10">Outubro</option>
          <option value="11">Novembro</option>
          <option value="12">Dezembro</option>
        </select>
        <button id="btnHistory" class="action-btn">IR</button>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-group">
        <button class="filter-btn active" data-view="d0">D-0 (Hoje)</button>
        <button class="filter-btn" data-view="d1">D-1</button>
        <button class="filter-btn" data-view="d2">D-2</button>
      </div>
      <div class="filter-divider"></div>
      <div class="filter-group">
        <button class="filter-btn" data-view="semana">Semana</button>
        <button class="filter-btn" data-view="quinzena">Quinzena</button>
      </div>
      <div class="header-actions">
        <button id="refreshBtn">â†»</button>
      </div>
    </div>
  </header>

  <main id="dashboard" style="padding: 15px;">
    
    <div class="row-container">
        <div class="col-half card">
            <div class="card-header"><h3>Backlog Litoral (Acumulado)</h3><span id="valBackLit" class="card-value">0</span></div>
            <div style="display:flex; height:200px;">
                <div style="width:40%; position:relative;"><canvas id="chartBackLit"></canvas></div>
                <div class="list-container" id="listBackLit" style="width:60%; border-left:1px solid #eee;"></div>
            </div>
        </div>

        <div class="col-half card">
            <div class="card-header"><h3>Backlog SJC (Acumulado)</h3><span id="valBackSJC" class="card-value">0</span></div>
            <div style="display:flex; height:200px;">
                <div style="width:40%; position:relative;"><canvas id="chartBackSJC"></canvas></div>
                <div class="list-container" id="listBackSJC" style="width:60%; border-left:1px solid #eee;"></div>
            </div>
        </div>
    </div>

    <div class="row-container">
        <div class="col-quarter card">
            <div class="card-header"><h3 style="font-size: 14px;">Status Lit</h3></div>
            <div class="chart-container-small"><canvas id="statusLit"></canvas></div>
        </div>
        
        <div class="col-quarter card">
            <div class="card-header"><h3 style="font-size: 14px;">Status SJC</h3></div>
            <div class="chart-container-small"><canvas id="statusSJC"></canvas></div>
        </div>

        <div class="col-quarter card">
            <div class="card-header"><h3 style="font-size: 14px;">SLA Fechamento Lit</h3></div>
            <div class="chart-container-small"><canvas id="slaLit"></canvas></div>
            <div class="legend"><span class="pill pill-green">OK</span><span class="pill pill-red">NOK</span></div>
        </div>

        <div class="col-quarter card">
            <div class="card-header"><h3 style="font-size: 14px;">SLA Fechamento SJC</h3></div>
            <div class="chart-container-small"><canvas id="slaSJC"></canvas></div>
            <div class="legend"><span class="pill pill-green">OK</span><span class="pill pill-red">NOK</span></div>
        </div>
    </div>

    <div class="row-container">
        <div class="col-half card" style="background:#fff1f2; border:1px solid #fecdd3">
            <div class="card-header"><h3 style="color:#be123c">CrÃ­ticos > 24h (Litoral)</h3></div>
            <div class="table-responsive"><table class="data-table" id="tableCritLit"><thead><tr><th>Categoria</th><th>Qtd</th><th>Status</th></tr></thead><tbody></tbody></table></div>
        </div>

        <div class="col-half card" style="background:#fff1f2; border:1px solid #fecdd3">
            <div class="card-header"><h3 style="color:#be123c">CrÃ­ticos > 24h (SJC)</h3></div>
            <div class="table-responsive"><table class="data-table" id="tableCritSJC"><thead><tr><th>Categoria</th><th>Qtd</th><th>Status</th></tr></thead><tbody></tbody></table></div>
        </div>
    </div>

    <div class="card card-wide" style="background:#f0f9ff; border:1px solid #bae6fd; margin-bottom: 15px;">
        <div class="card-header"><h3 style="color:#0369a1">ðŸ’Ž Casos Especiais (VIP / Hunter)</h3></div>
        <div style="display:flex; gap:20px;">
            <div style="flex:1;"><h4>LITORAL</h4><div class="list-container" id="listVipLit" style="height:150px;"></div></div>
            <div style="width:1px; background:#cbd5e1;"></div>
            <div style="flex:1;"><h4>SJC</h4><div class="list-container" id="listVipSJC" style="height:150px;"></div></div>
        </div>
    </div>

  </main>
  
  <script src="js/app.js"></script>
</body>
</html>